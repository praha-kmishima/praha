# 44 ライブラリを使ってみよう

フロントエンドでは様々な機能を実装済みのコンポーネントを提供するもの・便利なカスタムフックを提供するものなど数多くのライブラリが存在します。

ライブラリを使用することで自前で機能を実装する工数を大きく削減し、よりドメインの実装に集中することができます。

React Hook Formを使用したフォームの実装を通して、ライブラリの使い方を学習しましょう。

## 1-1 ライブラリを使用せずにフォームを実装しよう

実装要件：

- type=”text”である「名前」を入力する`<input>`要素を持つ
- type=”radio”である「性別」を入力する`<input>`要素を持つ
- type=”button”であるフォームに入力した内容を送信する`<button>`要素を持つ
- `<button>`要素をクリックすると名前と性別がコンソールに出力される

[実装しました](https://github.com/praha-kmishima/44-praha-form/blob/8834d677fe28edf9f36a15fd0c544ff54aa36188/src/App.tsx)

>![](image.png)

## 1-2 追加の要件があります。React Hook Formで実装してみましょう

実装要件：

- 「名前」は入力必須
- 「名前」は最大10文字まで
- 送信した時に上記のいずれかに違反した場合、それを伝えるエラーメッセージが表示される

[実装しました](https://github.com/praha-kmishima/44-praha-form/blob/dad2f24b860cbe8df91e4318cf5842aca09b48f3/src/App.tsx)

>![](image-1.png)

## 任意課題:実装したフォームが直接React Hook Formに依存しない形にリファクタリングしてみてください

`App.tsx`からフォーム部分のコンポーネントを`components/myProfileForm`に分離し、React Hook Formに依存している箇所は`useCustomForm.ts`というカスタムフックのファイルに分離しました。

before:

```bash
.
 └ src
   └ App.tsx 👈 ここにフォーム実装
```

after:

```bash
.
 └ src
 │ └ components
 │  └ myProfileForm
 │     └ index.tsx 👈 ここにフォーム実装
 │     └ useCustomForm.ts 👈 React Hook Formのラップ関数
 └ App.tsx 
```

実装:

- [index.tsx](https://github.com/praha-kmishima/44-praha-form/blob/ffc7566a0efcb2837a4d3e81654658c2197dbe9b/src/components/myProfileForm/index.tsx)
- [useCustomForm](https://github.com/praha-kmishima/44-praha-form/blob/ffc7566a0efcb2837a4d3e81654658c2197dbe9b/src/components/myProfileForm/useCustomForm.ts)

## 2-1 ライブラリに直接依存しないようにリファクタリングすることは、どのようなメリットがあるのでしょうか？


- メリット
  - ライブラリが及ぼすコードベースへの影響を掴みやすい
    - useFormをimportしているコンポーネントはuseCustomFormのみになるため
  - テスト容易性が向上する
    - useCustomFormのモックを用意すればよい
- デメリット
  - シンプルではない
    - 抽象化されたコードのため可読性が悪い
    - インターフェース部分と呼び出し部分で2ファイルに分断される
  - ラップ関数をどのようなインターフェースにするか決定する必要がある
    - React Hook Formの型定義をある程度理解しなければいけない
    - ラップ関数の仕様は、共同開発者にとって認知負荷になる可能性がある

## 2-2 要件を実装することが可能なライブラリが複数ある場合、どのようにライブラリを選定するのが良いでしょうか

ライブラリ選定の指針

- プロジェクトの要件
  - どれくらいの頻度でリファクタリングしているか、要件が追加されるか
  - 受託なのか、内製開発なのか
- 開発メンバーの経験
  - そのライブラリ、周辺エコシステムに精通している人がいるか、いないか
  - 導入することで開発者のモチベーションに影響があるか、ないか
- なぜライブラリを導入する必要があるのか？
  - ライブラリを使うことでどのような恩恵を得られるのか
- リスク想定
  - メンテナンスが仮に止まったとして、プロジェクトに影響があるのか、ないのか
  - １年後、３年後、１０年後もこのライブラリを採用することが可能なのか
- 選定するにあたりどれくらいの時間をかけるか