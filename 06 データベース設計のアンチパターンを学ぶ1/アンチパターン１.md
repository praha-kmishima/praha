# 課題 1

## 回答 1

この設計において生じる可能性のある問題：

- 特定のタグを含むレコードを検出する際、LIKE 句や正規表現を使用する必要がある
    - 例：「プラハ（都市）」と「プラハチャレンジ」が含まれている場合、単に「プラハ」で検索すると、予想と異なるレコードが出力される可能性がある
- UNIQUE 制約が適用できないため、アプリケーション側で重複チェックが必要となる
    - タグ同士が重複しているかどうかの制約がデータベース側で保証されない
- 特定のタグを削除する際のクエリ作成が複雑化する

# 課題 2

## 回答 2

- Post に紐づく Tag の多対多関係を表現する中間テーブルを作成する。

![](attachments/Pasted%20image%2020250413134036.png)

### 新しい設計の改善点

- この中間テーブル（PostTags）を通じて、特定の Post に関連するタグの種類を容易に取得でき、検索や削除のクエリが簡素化される。
- PostTags テーブルの主キーを (post_id, tag_id) の複合キーとすることで、同一ポストに重複したタグを付与できない一意性制約を実現できる。
- Tags テーブルが独立することで、タグの名前変更や説明の追加など、タグ自体の管理も柔軟に行えるようになる。

# 課題 3

## 回答 3

- SNS アプリで、当初は単一のハッシュタグのみを想定していたが、複数のハッシュタグ対応の要望が急に入った場合
    - 既存の「hashtag」カラムにカンマ区切りで複数のタグを入れる対応をしてしまう。
- 古い顧客管理システムを新システムに統合する場合
    - カンマ区切りで出力された顧客のカテゴリデータをそのまま新しいデータベースに移行してしまう