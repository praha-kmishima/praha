# 課題 1

## 回答 1

- 親のコメントを取得する場合は 1 回の結合、親の親までのコメントを取得する場合は 2 回の結合、、、となり一番先祖のコメントを取得する場合は再帰的なループ処理が必要になる。
    - ツリー構造の深さが増すにつれて、クエリの複雑さと実行時間が指数関数的に増加する。これは特に大規模なデータセットや深いツリー構造を扱う場合に顕著な問題となる。
    - 全ての子孫や先祖を取得する際に、複数回のクエリや複雑な JOIN 操作が必要となり、パフォーマンスが低下する可能性がある。

# 課題 2

## 回答 2

[閉方テーブル](https://github.com/kmishima16/praha/blob/main/db_modeling_3/%E8%AA%B2%E9%A1%8C1/%E8%A7%A3%E7%AD%94.md#%E9%96%89%E6%96%B9%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AE%E4%BD%9C%E6%88%90%E3%83%AB%E3%83%BC%E3%83%AB) を用いてテーブル作成する。

![](attachments/Pasted%20image%2020250413134108.png)

### 新しい設計の改善点

- 親子関係が MessageTree に格納されるようになり、階層関係の取得が簡単になった
    - 親コメントを探す場合は対象の descendant_id を持つレコードを探す
    - 子コメントを探す場合は対象の ancestor_id を持つレコードを探す

# 課題 3

## 回答 2

- 組織構造や部門階層を管理する人事システムの開発時にも同様のアンチパターンに陥る可能性がある
    - 従業員の直属の上司のみを記録するシンプルな構造を採用してしまうと、組織全体の階層構造の把握や分析が困難になる。